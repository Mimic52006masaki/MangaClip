{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///Users/masaki/Desktop/OriginalApp/MangaClip/lib/scraper.ts"],"sourcesContent":["import axios from 'axios';\nimport * as cheerio from 'cheerio';\n\nexport interface ScrapedArticle {\n  title: string;\n  url: string;\n}\n\n// Manga summary news\nexport async function scrapeMangaArticles(): Promise<ScrapedArticle[]> {\n  try {\n    const response = await axios.get('https://mangamatomesokuhou.com/', {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n      }\n    });\n\n    const $ = cheerio.load(response.data);\n    const articles: ScrapedArticle[] = [];\n\n    // Assuming articles are in .post or similar selector\n    $('.post').each((_, element) => {\n      const title = $(element).find('h2 a').text().trim();\n      const url = $(element).find('h2 a').attr('href');\n\n      if (title && url) {\n        articles.push({ title, url });\n      }\n    });\n\n    return articles;\n  } catch (error) {\n    console.error('Error scraping manga articles:', error);\n    throw new Error('Failed to scrape manga articles');\n  }\n}\n\n// Anime summary CH\nexport async function scrapeAnimeArticles(): Promise<ScrapedArticle[]> {\n  try {\n    const response = await axios.get('https://animematomech.com/', {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'\n      }\n    });\n\n    const $ = cheerio.load(response.data);\n    const articles: ScrapedArticle[] = [];\n\n    // Assuming articles are in .entry or similar selector\n    $('.entry').each((_, element) => {\n      const title = $(element).find('h2 a').text().trim();\n      const url = $(element).find('h2 a').attr('href');\n\n      if (title && url) {\n        articles.push({ title, url });\n      }\n    });\n\n    return articles;\n  } catch (error) {\n    console.error('Error scraping anime articles:', error);\n    throw new Error('Failed to scrape anime articles');\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;;;AAQO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,yLAAK,CAAC,GAAG,CAAC,mCAAmC;YAClE,SAAS;gBACP,cAAc;YAChB;QACF;QAEA,MAAM,IAAI,wMAAY,CAAC,SAAS,IAAI;QACpC,MAAM,WAA6B,EAAE;QAErC,qDAAqD;QACrD,EAAE,SAAS,IAAI,CAAC,CAAC,GAAG;YAClB,MAAM,QAAQ,EAAE,SAAS,IAAI,CAAC,QAAQ,IAAI,GAAG,IAAI;YACjD,MAAM,MAAM,EAAE,SAAS,IAAI,CAAC,QAAQ,IAAI,CAAC;YAEzC,IAAI,SAAS,KAAK;gBAChB,SAAS,IAAI,CAAC;oBAAE;oBAAO;gBAAI;YAC7B;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM,IAAI,MAAM;IAClB;AACF;AAGO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,MAAM,yLAAK,CAAC,GAAG,CAAC,8BAA8B;YAC7D,SAAS;gBACP,cAAc;YAChB;QACF;QAEA,MAAM,IAAI,wMAAY,CAAC,SAAS,IAAI;QACpC,MAAM,WAA6B,EAAE;QAErC,sDAAsD;QACtD,EAAE,UAAU,IAAI,CAAC,CAAC,GAAG;YACnB,MAAM,QAAQ,EAAE,SAAS,IAAI,CAAC,QAAQ,IAAI,GAAG,IAAI;YACjD,MAAM,MAAM,EAAE,SAAS,IAAI,CAAC,QAAQ,IAAI,CAAC;YAEzC,IAAI,SAAS,KAAK;gBAChB,SAAS,IAAI,CAAC;oBAAE;oBAAO;gBAAI;YAC7B;QACF;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM,IAAI,MAAM;IAClB;AACF"}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///Users/masaki/Desktop/OriginalApp/MangaClip/app/api/scrape/anime/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { scrapeAnimeArticles } from '@/lib/scraper';\nimport { storage, AnimeArticle } from '@/lib/storage';\n\nexport async function POST() {\n  try {\n    // Scrape articles\n    const scrapedArticles = await scrapeAnimeArticles();\n\n    // Get existing URLs to check duplicates\n    const existingUrls = db.prepare('SELECT url FROM anime_articles').all() as { url: string }[];\n    const existingUrlSet = new Set(existingUrls.map(row => row.url));\n\n    // Filter out duplicates\n    const newArticles = scrapedArticles.filter(article => !existingUrlSet.has(article.url));\n\n    // Insert new articles\n    const insert = db.prepare(`\n      INSERT INTO anime_articles (title, url)\n      VALUES (?, ?)\n    `);\n\n    const insertedArticles: AnimeArticle[] = [];\n\n    for (const article of newArticles) {\n      const result = insert.run(article.title, article.url);\n      const insertedArticle = db.prepare('SELECT * FROM anime_articles WHERE id = ?').get(result.lastInsertRowid) as AnimeArticle;\n      insertedArticles.push(insertedArticle);\n    }\n\n    return NextResponse.json({\n      success: true,\n      scraped: scrapedArticles.length,\n      new: newArticles.length,\n      articles: insertedArticles\n    });\n  } catch (error) {\n    console.error('Error in anime scrape:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to scrape anime articles' },\n      { status: 500 }\n    );\n  }\n}\n\nexport async function GET() {\n  try {\n    const articles = db.prepare(`\n      SELECT * FROM anime_articles\n      ORDER BY createdAt DESC\n    `).all() as AnimeArticle[];\n\n    return NextResponse.json({ success: true, articles });\n  } catch (error) {\n    console.error('Error fetching anime articles:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch articles' },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAGO,eAAe;IACpB,IAAI;QACF,kBAAkB;QAClB,MAAM,kBAAkB,MAAM,IAAA,8KAAmB;QAEjD,wCAAwC;QACxC,MAAM,eAAe,GAAG,OAAO,CAAC,kCAAkC,GAAG;QACrE,MAAM,iBAAiB,IAAI,IAAI,aAAa,GAAG,CAAC,CAAA,MAAO,IAAI,GAAG;QAE9D,wBAAwB;QACxB,MAAM,cAAc,gBAAgB,MAAM,CAAC,CAAA,UAAW,CAAC,eAAe,GAAG,CAAC,QAAQ,GAAG;QAErF,sBAAsB;QACtB,MAAM,SAAS,GAAG,OAAO,CAAC,CAAC;;;IAG3B,CAAC;QAED,MAAM,mBAAmC,EAAE;QAE3C,KAAK,MAAM,WAAW,YAAa;YACjC,MAAM,SAAS,OAAO,GAAG,CAAC,QAAQ,KAAK,EAAE,QAAQ,GAAG;YACpD,MAAM,kBAAkB,GAAG,OAAO,CAAC,6CAA6C,GAAG,CAAC,OAAO,eAAe;YAC1G,iBAAiB,IAAI,CAAC;QACxB;QAEA,OAAO,uLAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS,gBAAgB,MAAM;YAC/B,KAAK,YAAY,MAAM;YACvB,UAAU;QACZ;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,uLAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAAkC,GAC3D;YAAE,QAAQ;QAAI;IAElB;AACF;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,WAAW,GAAG,OAAO,CAAC,CAAC;;;IAG7B,CAAC,EAAE,GAAG;QAEN,OAAO,uLAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM;QAAS;IACrD,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,uLAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAO,OAAO;QAA2B,GACpD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}